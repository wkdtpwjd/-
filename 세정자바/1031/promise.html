<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
  // promise 객체 사용법
  // 왜사용하나..? 비동기적인 수행의 순서를 맞춰주기 위해서 사용

    const promise = new Promise((resolve,reject)=>{
      // resolve가 호출되면 promise객체는 fulfilled 상태로 변경
      // reject가 호출되면 promise객체는 rejected상태로 변경 
      // resolve()
      // reject()
      function reqListener() {
      // console.log(this)
      if (this.status >= 200 && this.status < 400){
        resolve()
        console.log(this)
      }else{
        reject()
      }
      console.log(this.responseText)
    }
    const req = new XMLHttpRequest()
    // 로딩이 완료가 되면 함수 실행해라
    req.addEventListener('load',reqListener)

    
    req.open('GET','https://api.thecatapi.com/v1/images/search/')
    req.send()

    


    }) 
    promise.then((response)=>{
      console.log('정상 실행되었습니다!')
      // 문자열 > 객체로 변경시
      obj = JSON.parse(response)
      // JSON.stringify(obj)  반대로
      console(obj)
    
    })
      .catch(()=>{
        console.log('에러발생')
      })

  </script>
</body>
</html>